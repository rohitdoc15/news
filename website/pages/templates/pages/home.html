{% include "header.html" %}
{% load static %}




  
<body id ="modals-here" class=" w-full h-screen bg-fixed dark text-[#f0f0f0 ] custom-font" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'  >

<div class="swiper-container overflow-x-auto  " style="scrollbar-width : thin; scrollbar-color: transparent transparent;">
    <div class="swiper-wrapper">
        {% for channel in channels %}
        <div class="swiper-slide">
            <div class="filter w-20 h-20 rounded-full overflow-hidden bg-[gray-300] flex items-center justify-center">
                <img 
                  src="{{ channel.logo.url }}" 
                  alt="{{ channel.name }} Logo" 
                  class="max-w-full max-h-full object-cover rounded-full filter brightness-50 contrast-150 grayscale-100"
                  hx-get="/story/{{ channel.name }}" 
                  hx-target="#modals-here" 
                  hx-trigger="click"
                  onclick="updateURL('/story/{{ channel.name }}')"
                  hx-push-url="true"
                >
            </div>
        </div>
        {% endfor %}
    </div>
</div>

  
  <div class ="lg:grid lg:grid-cols-2 lg:items-center justify-center">
  <div class="m-4 shadow-lg rounded-md border border-[#787A91] border-opacity-50 bg-gray-900  text-[#EEEEEE] " >
    
        <h2 class="text-[#FF4560]  font-bold mb-4 px-4 pt-4">Trending Topics</h2>

        {% for topic in topics %}
        <form method="POST" action="/topic-page/">
            {% csrf_token %}
            <input type="hidden" name="topic" value="{{ topic.topic.topic }}">
            <div class="mb-4 cursor-pointer hover:bg-gray-700" onclick="this.parentNode.submit()">
                <div class="text-[#787A91] font-bold">#{{ topic.topic.topic }}</div>
            </div>
            <hr class="border-blue-500">
        </form>
        {% endfor %}

        <form method="POST" class="-mb-2" action="/topic-page/">
            {% csrf_token %}
            <input type="hidden" name="topic" value="{{ topic1.topic.topic }}">
            <div class="mb-4 -mt-4 cursor-pointer hover:bg-gray-700" onclick="this.parentNode.submit()">
                <div class="flex justify-between items-center px-4 py-1">
                    <div class="text-3xl font-bold">#{{ topic1.topic.topic }}</div>
                    {% if topic1.trend_indicator == 'upwards' %}
                    <i class="fa-solid fa-arrow-trend-up" style="color: #00e396;"></i>
                    {% elif topic1.trend_indicator == 'downwards' %}
                        <i class="fa-solid fa-arrow-trend-down" style="color: #ff4560;"></i>
                    {% else %}
                            <i class="fa-solid fa-arrow-right" style="color: #008ffb;"></i>
                        {% endif %}
                        </div>
                <hr class="border-[#787A91] border-opacity-50 h-px">
            </div>
        </form>
        
        <form method="POST" class="-mb-2" action="/topic-page/">
            {% csrf_token %}
            <input type="hidden" name="topic" value="{{ topic2.topic.topic }}">
            <div class="mb-4 cursor-pointer hover:bg-gray-700" onclick="this.parentNode.submit()">
                <div class="flex justify-between items-center px-4 py-1">
                    <div class=" text-2xl opacity-90  font-bold">#{{ topic2.topic.topic }}</div>
                    {% if topic2.trend_indicator == 'upwards' %}
                        <i class="fa-solid fa-arrow-trend-up" style="color: #00e396;"></i>
                    {% elif topic2.trend_indicator == 'downwards' %}
                        <i class="fa-solid fa-arrow-trend-down" style="color: #ff4560;"></i>
                    {% else %}
                        <i class="fa-solid fa-arrow-right" style="color: #008ffb;"></i>
                    {% endif %}
                </div>
                <hr class="border-[#787A91] border-opacity-50 h-px">
            </div>
            
        </form>
    
        <form method="POST" class="-mb-2" action="/topic-page/">
            {% csrf_token %}
            <input type="hidden" name="topic" value="{{ topic3.topic.topic }}">
            <div class="mb-4 cursor-pointer hover:bg-gray-700" onclick="this.parentNode.submit()">
                <div class="flex justify-between items-center px-4 py-1">

                <div class=" text-xl opacity-80 font-bold ">#{{ topic3.topic.topic }}</div>
                {% if topic3.trend_indicator == 'upwards' %}
                        <i class="fa-solid fa-arrow-trend-up" style="color: #00e396;"></i>
                    {% elif topic3.trend_indicator == 'downwards' %}
                        <i class="fa-solid fa-arrow-trend-down" style="color: #ff4560;"></i>
                    {% else %}
                        <i class="fa-solid fa-arrow-right" style="color: #008ffb;"></i>
                    {% endif %}
                </div>
                <hr class="border-[#787A91] border-opacity-50 h-px ">
            </div>
           
        </form>
        <form method="POST" class="-mb-2" action="/topic-page/">
            {% csrf_token %}
            <input type="hidden" name="topic" value="{{ topic4.topic.topic }}">
            <div class="mb-4 cursor-pointer hover:bg-gray-700" onclick="this.parentNode.submit()">
                <div class="flex justify-between items-center px-4 py-1">
                <div class=" text-lg opacity-70 font-bold ">#{{ topic4.topic.topic }}</div>
                {% if topic3.trend_indicator == 'upwards' %}
                        <i class="fa-solid fa-arrow-trend-up" style="color: #00e396;"></i>
                    {% elif topic3.trend_indicator == 'downwards' %}
                        <i class="fa-solid fa-arrow-trend-down" style="color: #ff4560;"></i>
                    {% else %}
                        <i class="fa-solid fa-arrow-right" style="color: #008ffb;"></i>
                    {% endif %}
                </div>
                <hr class="border-[#787A91] border-opacity-50 h-px">
            </div>
            
        </form>
        <form method="POST" class="-mb-2" action="/topic-page/">
            {% csrf_token %}
            <input type="hidden" name="topic" value="{{ topic5.topic.topic }}">
            <div class="mb-4 cursor-pointer hover:bg-gray-700" onclick="this.parentNode.submit()">
                <div class="flex justify-between items-center px-4 py-1">
                <div class=" text-sm opacity-70 font-bold ">#{{ topic5.topic.topic }}</div>
                {% if topic4.trend_indicator == 'upwards' %}
                        <i class="fa-solid fa-arrow-trend-up" style="color: #00e396;"></i>
                    {% elif topic4.trend_indicator == 'downwards' %}
                        <i class="fa-solid fa-arrow-trend-down" style="color: #ff4560;"></i>
                    {% else %}
                        <i class="fa-solid fa-arrow-right" style="color: #008ffb;"></i>
                    {% endif %}
                </div>
              
            </div>
            
        </form>
</div>


        
    <div id="chart-container" class="  mt-8  shadow-lg custom-font  ">
        <div id="mtrends" class="w-full h-96"></div>
    </div>
    
    <script>
        // Prepare chart data from the 'chart_data' variable
        const chartData = {{ data.series|safe }};
    
        // Prepare series data for ApexCharts
        const seriesData = chartData.map((data) => ({
            name: data.name,
            data: data.data,
        }));
    
        // Initialize ApexCharts
        const options = {
            series: seriesData,
            chart: {
                type: 'area',
                height: 350,
                foreColor: "#EEEEEE",
                fontFamily: 'Geologica, sans-serif',
                fontSize: '15px',
                stacked: false,
                dropShadow: {
                    enabled: true,
                    enabledSeries: [0],
                    top: -2,
                    left: 2,
                    blur: 5,
                    opacity: 0.06
                },
                toolbar: {
                    show: false,
                },
                background: {
                    opacity: 0,
                },
               
            },
            title: {
                text: "Video trend over the past 30 days", // Make sure to use double quotes here
                align: "center",
                floating: false,
                style: {
                  fontSize: '14px', // Adjust the font size as needed
                  color: '#FF4560',
                  fontWeight: '200',
                  
                },
              },
           
            stroke: {
                curve: 'smooth',
                width: 3
            },
            dataLabels: {
                enabled: false
            },
            xaxis: {
                type: 'datetime',
                categories: {{ data.labels | safe }},
                position: 'bottom',
                labels: {
                    rotate: 0,
                    rotateAlways: true,
                    hideOverlappingLabels: true,
                   
                    style: {
                        colors: [],
                        fontSize: '10px',
                       
                        cssClass: 'apexcharts-xaxis-label',
                    },
                },
                axisBorder: {
                    show: false,
                },
                axisTicks: {
                    show: false,
                },
            },
            theme: {
                mode: 'dark',
                palette: 'palette1', // up to palette10
            },
            fill: {
                type: "gradient",
                gradient: {
                    shadeIntensity: 1,
                    inverseColors: false,
                    opacityFrom: 0.6,
                    opacityTo: 0.05,
                    stops: [20, 100, 100, 100]
                }
            },
            responsive: [
                {
                    breakpoint: 767, // Adjust this value based on your desired breakpoint
                    options: {
                        chart: {
                            height: 375, // Increase the chart height for mobile devices
                        }
                    }
                }
            ]
        };
    
        const chart = new ApexCharts(document.querySelector('#mtrends'), options);
        chart.render();
    </script>


  
    {% comment %} Mustard/Petrol Chart {% endcomment %}
    <div id="inflationchart" class="pt-5 shadow-lg custom-font  border-t-4 border-gray-900"></div>

    <script>
        fetch('/inflation-chart-data')  // Replace with the URL of your inflation chart view
            .then(response => response.json())
            .then(data => {
                var chartData = data.chart_data;
    
                var options = {
                    chart: {
                        type: 'area',
                        height: 350,
                        width: '100%',
                        foreColor: "#EEEEEE",
                        fontFamily: 'Geologica, sans-serif',
                        fontSize: '15px',
                        stacked: false,
                        dropShadow: {
                            enabled: true,
                            enabledSeries: [0],
                            top: -2,
                            left: 2,
                            blur: 5,
                            opacity: 0.06
                        },
                        toolbar: {
                            show: false,
                        },
                        background: {
                            opacity: 0,
                        },
                        
                    },
                    title: {
                        text: "Mustard and Petrol price over the past year", // Make sure to use double quotes here
                        align: "center",
                        floating: false,
                        style: {
                          fontSize: '14px', // Adjust the font size as needed
                          color: '#FF4560',
                          fontWeight: '200',
                          
                        },
                      },
                    dataLabels: {
                        enabled: false
                    },
                   
                    stroke: {
                        curve: 'smooth',
                        width: 3
                    },
                    series: chartData.map(item => ({
                        name: item.name,
                        data: item.data
                    })),
                    xaxis: {
                        type: 'datetime',
                        labels: {
                            datetimeFormatter: {
                                year: 'yyyy',
                                month: 'MMM yyyy',
                                day: 'dd MMM yyyy'
                            }
                        }
                    },
                    
                    theme: {
                        mode: 'dark',
                        palette: 'palette1', // up to palette10
                    },
                    fill: {
                        type: "gradient",
                        gradient: {
                            shadeIntensity: 1,
                            inverseColors: false,
                            opacityFrom: 0.6,
                            opacityTo: 0.05,
                            stops: [20, 100, 100, 100]
                        }
                    },
                    annotations: {
                        points: [
                            {
                                x: new Date(chartData[0].data[chartData[0].data.length - 1].x).getTime(),
                                y: chartData[0].data[chartData[0].data.length - 1].y,
                               
                                image: {
                                    path: "{% static 'images/mustard.png' %}" ,
                                     // Replace with the path to your image for Sarso
                                }
                            },
                            {
                                x: new Date(chartData[1].data[chartData[1].data.length - 1].x).getTime(),
                                y: chartData[1].data[chartData[1].data.length - 1].y,
                               
                                image: {
                                    path: "{% static 'images/petrol.png' %}"  // Replace with the path to your image for Petroleum
                                }
                            }
                        ]
                     
                    }
                
                };
    
                var chart = new ApexCharts(document.querySelector("#inflationchart"), options);
                chart.render();
            });
    </script>
    <div class="flourish-embed flourish-map w-[80%] h-[80%] my-auto mx-auto" data-src="visualisation/14123232"><script src="https://public.flourish.studio/resources/embed.js"></script></div> 
    {% comment %} <canvas id="inflationChart"></canvas> {% endcomment %}

</div>


<div class="chart-container">
    <canvas id="gdpChart"></canvas>
</div>

<div class="chart-container">
    <canvas id="unemploymentChart"></canvas>
</div>

<div class="chart-container">
    <canvas id="interestChart"></canvas>
</div>

<div class="chart-container">
    <canvas id="exchangeChart"></canvas>
</div>

<div id="chartdiv" class="w-full h-80"></div>

<script>
    // Inflation Rate
    const inflationData = {
        "2016": 5.0,
        "2017": 3.6,
        "2018": 3.4,
        "2019": 4.2,
        "2020": 6.2,
        "2021": 5.7
    };

    const inflationYears = Object.keys(inflationData);
    const inflationRates = Object.values(inflationData);

    const inflationCtx = document.getElementById('inflationChart').getContext('2d');
    const inflationChart = new Chart(inflationCtx, {
        type: 'line',
        data: {
            labels: inflationYears,
            datasets: [{
                label: 'Inflation Rate (%)',
                data: inflationRates,
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1
            }]
        },
        options: {
            plugins: {
                legend: {
                    labels: {
                        color: '#fff'
                    }
                }
            },
            scales: {
                x: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        color: '#fff'
                    }
                },
                y: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        stepSize: 1,
                        color: '#fff'
                    },
                    beginAtZero: true
                }
            }
        }
    });

    // GDP Growth Rate
    const gdpData = {
        "2016": 7.1,
        "2017": 6.8,
        "2018": 6.1,
        "2019": 4.2,
        "2020": -7.3,
        "2021": 11.5
    };

    const gdpYears = Object.keys(gdpData);
    const gdpGrowthRates = Object.values(gdpData);

    const gdpCtx = document.getElementById('gdpChart').getContext('2d');
    const gdpChart = new Chart(gdpCtx, {
        type: 'line',
        data: {
            labels: gdpYears,
            datasets: [{
                label: 'GDP Growth Rate (%)',
                data: gdpGrowthRates,
                backgroundColor: 'rgba(255, 206, 86, 0.2)',
                borderColor: 'rgba(255, 206, 86, 1)',
                borderWidth: 1
            }]
        },
        options: {
            plugins: {
                legend: {
                    labels: {
                        color: '#fff'
                    }
                }
            },
            scales: {
                x: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        color: '#fff'
                    }
                },
                y: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        stepSize: 1,
                        color: '#fff'
                    },
                    beginAtZero: true
                }
            }
        }
    });

    // Unemployment Rate
    const unemploymentData = {
        "2016": 5.0,
        "2017": 3.5,
        "2018": 3.4,
        "2019": 3.7,
        "2020": 7.1,
        "2021": 8.2
    };

    const unemploymentYears = Object.keys(unemploymentData);
    const unemploymentRates = Object.values(unemploymentData);

    const unemploymentCtx = document.getElementById('unemploymentChart').getContext('2d');
    const unemploymentChart = new Chart(unemploymentCtx, {
        type: 'line',
        data: {
            labels: unemploymentYears,
            datasets: [{
                label: 'Unemployment Rate (%)',
                data: unemploymentRates,
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255, 99, 132, 1)',
                borderWidth: 1
            }]
        },
        options: {
            plugins: {
                legend: {
                    labels: {
                        color: '#fff'
                    }
                }
            },
            scales: {
                x: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        color: '#fff'
                    }
                },
                y: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        stepSize: 1,
                        color: '#fff'
                    },
                    beginAtZero: true
                }
            }
        }
    });

    // Interest Rates
    const interestData = {
        "2016": 6.25,
        "2017": 6.00,
        "2018": 6.50,
        "2019": 5.15,
        "2020": 4.00,
        "2021": 3.50
    };

    const interestYears = Object.keys(interestData);
    const interestRates = Object.values(interestData);

    const interestCtx = document.getElementById('interestChart').getContext('2d');
    const interestChart = new Chart(interestCtx, {
        type: 'line',
        data: {
            labels: interestYears,
            datasets: [{
                label: 'Interest Rates (%)',
                data: interestRates,
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
        options: {
            plugins: {
                legend: {
                    labels: {
                        color: '#fff'
                    }
                }
            },
            scales: {
                x: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        color: '#fff'
                    }
                },
                y: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        stepSize: 1,
                        color: '#fff'
                    },
                    beginAtZero: true
                }
            }
        }
    });

    // Exchange Rates
    const exchangeData = {
        "2016": 66.55,
        "2017": 63.87,
        "2018": 69.65,
        "2019": 71.39,
        "2020": 75.02,
        "2021": 73.17
    };

    const exchangeYears = Object.keys(exchangeData);
    const exchangeRates = Object.values(exchangeData);

    const exchangeCtx = document.getElementById('exchangeChart').getContext('2d');
    const exchangeChart = new Chart(exchangeCtx, {
        type: 'line',
        data: {
            labels: exchangeYears,
            datasets: [{
                label: 'Exchange Rates (INR/USD)',
                data: exchangeRates,
                backgroundColor: 'rgba(153, 102, 255, 0.2)',
                borderColor: 'rgba(153, 102, 255, 1)',
                borderWidth: 1
            }]
        },
        options: {
            plugins: {
                legend: {
                    labels: {
                        color: '#fff'
                    }
                }
            },
            scales: {
                x: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        color: '#fff'
                    }
                },
                y: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        color: '#fff'
                    },
                    beginAtZero: false
                }
            }
        }
    });
</script>
<script>
    const inflationData = {
        "2016": 2.1,
        "2017": 2.5,
        "2018": 2.4,
        "2019": 1.9,
        "2020": 1.3,
        "2021": 2.0
    };

    const years = Object.keys(inflationData);
    const inflationRates = Object.values(inflationData);

    const ctx = document.getElementById('inflationChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: years,
            datasets: [{
                label: 'Inflation Rate (%)',
                data: inflationRates,
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1
            }]
        },
        options: {
            plugins: {
                legend: {
                    labels: {
                        color: '#fff'
                    }
                }
            },
            scales: {
                x: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        color: '#fff'
                    }
                },
                y: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        stepSize: 0.5,
                        color: '#fff'
                    },
                    beginAtZero: true
                }
            }
        }
    });
</script>   
     

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</body>

{% include 'footer.html' %}
</html>
